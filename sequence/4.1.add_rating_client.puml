@startuml 4.1. User add a rating to a music (sender client side)

actor Client as client

box "Client App" #LightBlue
    participant IHMMusic as ihm
    participant Data as data
    participant Communication as com
end box

actor Server as server

client ->> ihm++: Add Rating

ihm -> data++ : getPlayedTrack()
return track : Track


ihm -> data++ : addRating(trackId : UUID, rating : Rating)
alt track owned
    data->data++: saveTrackFile(trackId : UUID)
    return void | Exception
end

deactivate ihm
data->>ihm++:  NEW_RATING (Rating) 
deactivate data 

alt track not owned
    ihm -> com++ : addRating(trackId : UUID, rating : Rating)
    com ->> server : PUBLISH_RATING (Rating)
    return void | NetworkException
end


@enduml